<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Future of Telecoms: Constellation</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body { margin: 0; overflow: hidden; background: #050510; font-family: 'Cormorant Garamond', serif; color: #fff; }
        #canvas-container { width: 100vw; height: 100vh; touch-action: none; }
        
        #ui {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;
            display: flex; flex-direction: column; justify-content: space-between; padding: 30px;
        }
        
        h1 { margin: 0; font-size: 2rem; letter-spacing: 5px; text-transform: uppercase; opacity: 0.8; }
        
        .info-card {
            position: absolute; top: 50%; right: 50px; transform: translateY(-50%);
            width: 300px; text-align: right;
            opacity: 0; transition: opacity 1s;
        }
        
        .info-card.visible { opacity: 1; }
        
        .info-card h2 { font-size: 2.5rem; margin-bottom: 10px; color: #aaaaff; }
        .info-card p { font-size: 1.2rem; line-height: 1.6; color: #ccccff; }
        
        .btn-exit {
            position: absolute; bottom: 30px; left: 30px; pointer-events: auto;
            color: #fff; text-decoration: none; border-bottom: 1px solid #fff;
            font-size: 0.9rem; opacity: 0.6; transition: 0.3s;
        }
        .btn-exit:hover { opacity: 1; }
        
    </style>
</head>
<body>

    <div id="canvas-container"></div>
    
    <div id="ui">
        <h1>Celestial Data</h1>
        <div class="info-card" id="card">
            <h2 id="title">The 5G Hydra</h2>
            <p id="desc">A multi-headed network beast covering the globe in ultra-low latency signal.</p>
        </div>
        <a href="index.html" class="btn-exit">RETURN TO EARTH</a>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <script>
        const container = document.getElementById('canvas-container');
        const card = document.getElementById('card');
        const title = document.getElementById('title');
        const desc = document.getElementById('desc');

        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x050510, 0.002);

        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 50;

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        container.appendChild(renderer.domElement);

        // Stars
        const starGeo = new THREE.BufferGeometry();
        const starPos = [];
        for(let i=0; i<3000; i++) {
            starPos.push((Math.random()-0.5)*400, (Math.random()-0.5)*400, (Math.random()-0.5)*400);
        }
        starGeo.setAttribute('position', new THREE.Float32BufferAttribute(starPos, 3));
        const starMat = new THREE.PointsMaterial({color: 0xffffff, size: 0.2});
        const stars = new THREE.Points(starGeo, starMat);
        scene.add(stars);

        // Constellations
        const constellations = [
            { 
                name: "The Neural Net", desc: "AI algorithms forming a self-healing brain.",
                points: [[-10, 5, 0], [-5, 10, 0], [0, 5, 0], [5, 10, 0], [10, 5, 0], [0, -5, 0]] 
            },
            { 
                name: "The Sat-Link", desc: "A chain of LEO satellites orbiting the equator.",
                points: [[-15, -10, -10], [-5, -12, -5], [5, -12, 0], [15, -10, 5]] 
            },
            { 
                name: "The Quantum Key", desc: "Unbreakable encryption locking the core.",
                points: [[-5, 0, 10], [5, 0, 10], [0, 8, 10], [0, -8, 10]] 
            }
        ];

        const constellationGroups = [];

        constellations.forEach((c, idx) => {
            const group = new THREE.Group();
            
            // Lines
            const points = c.points.map(p => new THREE.Vector3(p[0], p[1], p[2]));
            const geo = new THREE.BufferGeometry().setFromPoints(points);
            const mat = new THREE.LineBasicMaterial({ color: 0xaaaaff, transparent: true, opacity: 0.2 });
            const line = new THREE.Line(geo, mat);
            group.add(line);

            // Stars
            points.forEach(p => {
                const sGeo = new THREE.SphereGeometry(0.3, 8, 8);
                const sMat = new THREE.MeshBasicMaterial({ color: 0xffffff });
                const mesh = new THREE.Mesh(sGeo, sMat);
                mesh.position.copy(p);
                group.add(mesh);
            });

            // Hitbox
            const box = new THREE.Mesh(
                new THREE.SphereGeometry(8, 16, 16),
                new THREE.MeshBasicMaterial({ visible: false })
            );
            // Center approximate
            box.position.copy(points[Math.floor(points.length/2)]);
            box.userData = { id: idx, ...c };
            group.add(box);

            scene.add(group);
            constellationGroups.push(group);
        });

        // Interaction
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();

        function updateInput(x, y) {
            mouse.x = (x / window.innerWidth) * 2 - 1;
            mouse.y = -(y / window.innerHeight) * 2 + 1;
            
            // Parallax
            camera.position.x += (mouse.x * 2 - camera.position.x) * 0.05;
            camera.position.y += (mouse.y * 2 - camera.position.y) * 0.05;
            camera.lookAt(0,0,0);

            // Raycast
            raycaster.setFromCamera(mouse, camera);
            let hovered = false;
            
            constellationGroups.forEach(g => {
                // Hitbox is last child
                const intersects = raycaster.intersectObject(g.children[g.children.length-1]);
                const line = g.children[0];
                
                if(intersects.length > 0) {
                    hovered = true;
                    document.body.style.cursor = 'pointer';
                    gsap.to(line.material, { opacity: 1, duration: 0.5 });
                    
                    const data = intersects[0].object.userData;
                    title.innerText = data.name;
                    desc.innerText = data.desc;
                    card.classList.add('visible');
                } else {
                    gsap.to(line.material, { opacity: 0.2, duration: 0.5 });
                }
            });

            if(!hovered) {
                document.body.style.cursor = 'default';
                // Optional: hide card if not hovering?
                // card.classList.remove('visible'); 
            }
        }

        window.addEventListener('mousemove', (e) => updateInput(e.clientX, e.clientY));
        
        window.addEventListener('touchmove', (e) => {
            if(e.touches.length > 0) {
                updateInput(e.touches[0].clientX, e.touches[0].clientY);
            }
        });
        
        window.addEventListener('touchstart', (e) => {
            if(e.touches.length > 0) {
                updateInput(e.touches[0].clientX, e.touches[0].clientY);
            }
        });

        function animate() {
            requestAnimationFrame(animate);
            stars.rotation.y += 0.0002;
            constellationGroups.forEach(g => {
                g.rotation.y += 0.0005; // Slow drift
            });
            renderer.render(scene, camera);
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

    </script>
</body>
</html>
