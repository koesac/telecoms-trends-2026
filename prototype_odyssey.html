<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Future of Telecoms: Network Odyssey</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Inter:wght@300;600&display=swap" rel="stylesheet">
    
    <style>
        body { margin: 0; background: #000; font-family: 'Inter', sans-serif; color: white; overflow-x: hidden; overflow-y: auto; }
        #canvas-container { 
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh; 
            z-index: -1;
        }
        
        #ui {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;
            display: flex; flex-direction: column; justify-content: space-between; padding: 40px;
            z-index: 10;
        }

        /* Mobile specific padding */
        @media (max-width: 768px) {
            #ui { padding: 20px; }
            .header h1 { font-size: 1rem; letter-spacing: 5px; }
            .progress-nav { left: 20px; }
        }

        .label-container {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            text-align: center; pointer-events: none;
        }

        .scale-label {
            font-family: 'Syncopate', sans-serif;
            font-size: 4vw; letter-spacing: 20px; text-transform: uppercase;
            opacity: 0; transform: scale(0.8); transition: all 1s ease;
        }

        .scale-label.active { opacity: 0.2; transform: scale(1); }

        .scroll-hint {
            position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%);
            font-size: 0.7rem; letter-spacing: 3px; opacity: 0.5;
            animation: pulse 2s infinite;
        }

        @keyframes pulse { 0%, 100% { opacity: 0.3; } 50% { opacity: 0.8; } }

        .progress-nav {
            position: fixed; left: 40px; top: 50%; transform: translateY(-50%);
            display: flex; flex-direction: column; gap: 20px;
        }

        .nav-step {
            width: 2px; height: 40px; background: rgba(255,255,255,0.1);
            position: relative; transition: 0.5s;
        }
        .nav-step.active { background: #fff; box-shadow: 0 0 10px #fff; }
        .nav-step::after {
            content: attr(data-label); position: absolute; left: 15px; top: 0;
            font-size: 0.6rem; letter-spacing: 2px; text-transform: uppercase;
            opacity: 0; transition: 0.5s; white-space: nowrap;
        }
        .nav-step.active::after { opacity: 1; }

    </style>
</head>
<body>

    <div id="canvas-container"></div>

    <div id="ui">
        <div class="header">
            <h1>The Odyssey</h1>
        </div>

        <div class="progress-nav">
            <div class="nav-step active" data-label="Signal Tower" id="step-0"></div>
            <div class="nav-step" data-label="Data Centre" id="step-1"></div>
            <div class="nav-step" data-label="Orbital Network" id="step-2"></div>
            <div class="nav-step" data-label="Quantum Realm" id="step-3"></div>
        </div>

        <div class="label-container">
            <div class="scale-label" id="label-0">INFRASTRUCTURE</div>
            <div class="scale-label" id="label-1">INTELLIGENCE</div>
            <div class="scale-label" id="label-2">CONNECTIVITY</div>
            <div class="scale-label" id="label-3">SECURITY</div>
        </div>

        <div class="scroll-hint">SCROLL TO NAVIGATE REALITY</div>
        
        <a href="index.html" style="position: absolute; bottom: 40px; right: 40px; color: white; text-decoration: none; font-size: 0.7rem; letter-spacing: 2px; pointer-events: auto;">EXIT_ODYSSEY</a>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <script>
        gsap.registerPlugin(ScrollTrigger);

        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x000000, 0.05);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.01, 2000);
        camera.position.z = 5;

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        container.appendChild(renderer.domElement);

        // --- GROUPS ---
        const level0 = new THREE.Group(); // Tower
        const level1 = new THREE.Group(); // Data Center
        const level2 = new THREE.Group(); // Space
        const level3 = new THREE.Group(); // Quantum
        scene.add(level0, level1, level2, level3);

        // Position levels deeper in Z
        level1.position.z = -50;
        level2.position.z = -150;
        level3.position.z = -300;

        // --- LEVEL 0: SIGNAL TOWER ---
        const towerGeo = new THREE.CylinderGeometry(0.1, 0.5, 10, 8);
        const towerMat = new THREE.MeshBasicMaterial({ color: 0x333333, wireframe: true });
        const tower = new THREE.Mesh(towerGeo, towerMat);
        level0.add(tower);

        // Signal Rings
        for(let i=0; i<5; i++) {
            const ringGeo = new THREE.RingGeometry(0.5 + i*0.5, 0.52 + i*0.5, 32);
            const ringMat = new THREE.MeshBasicMaterial({ color: 0x00ffcc, transparent: true, opacity: 0.5, side: THREE.DoubleSide });
            const ring = new THREE.Mesh(ringGeo, ringMat);
            ring.rotation.x = Math.PI / 2;
            ring.position.y = 4;
            level0.add(ring);
            gsap.to(ring.scale, { x: 2, y: 2, duration: 2, repeat: -1, ease: "sine.inOut", delay: i*0.2 });
        }

        // --- LEVEL 1: DATA CENTRE ---
        const rackGeo = new THREE.BoxGeometry(2, 4, 2);
        const rackMat = new THREE.MeshBasicMaterial({ color: 0x111111, wireframe: true });
        for(let x=-10; x<=10; x+=4) {
            for(let z=-10; z<=10; z+=4) {
                const rack = new THREE.Mesh(rackGeo, rackMat);
                rack.position.set(x, 0, z);
                level1.add(rack);
                // Glowing lights
                const lightGeo = new THREE.BoxGeometry(0.1, 0.1, 0.1);
                const lightMat = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
                const light = new THREE.Mesh(lightGeo, lightMat);
                light.position.set(x + 0.9, Math.random() * 2, z + 1);
                level1.add(light);
            }
        }

        // --- LEVEL 2: SPACE ---
        // Stars
        const starGeo = new THREE.BufferGeometry();
        const starPos = [];
        for(let i=0; i<2000; i++) {
            starPos.push((Math.random()-0.5)*200, (Math.random()-0.5)*200, (Math.random()-0.5)*200);
        }
        starGeo.setAttribute('position', new THREE.Float32BufferAttribute(starPos, 3));
        const stars = new THREE.Points(starGeo, new THREE.PointsMaterial({color: 0xffffff, size: 0.1}));
        level2.add(stars);

        // Earth (Wireframe)
        const earthGeo = new THREE.SphereGeometry(10, 32, 32);
        const earthMat = new THREE.MeshBasicMaterial({ color: 0x0066ff, wireframe: true, transparent: true, opacity: 0.3 });
        const earth = new THREE.Mesh(earthGeo, earthMat);
        level2.add(earth);

        // Satellites
        for(let i=0; i<20; i++) {
            const satGeo = new THREE.BoxGeometry(0.2, 0.1, 0.5);
            const sat = new THREE.Mesh(satGeo, new THREE.MeshBasicMaterial({color: 0x00ffcc}));
            const r = 15;
            const phi = Math.random() * Math.PI;
            const theta = Math.random() * Math.PI * 2;
            sat.position.set(r * Math.sin(phi) * Math.cos(theta), r * Math.sin(phi) * Math.sin(theta), r * Math.cos(phi));
            level2.add(sat);
        }

        // --- LEVEL 3: QUANTUM ---
        const particleCount = 1000;
        const qGeo = new THREE.BufferGeometry();
        const qPos = [];
        const qColors = [];
        for(let i=0; i<particleCount; i++) {
            qPos.push((Math.random()-0.5)*20, (Math.random()-0.5)*20, (Math.random()-0.5)*20);
            qColors.push(Math.random(), 0, Math.random());
        }
        qGeo.setAttribute('position', new THREE.Float32BufferAttribute(qPos, 3));
        qGeo.setAttribute('color', new THREE.Float32BufferAttribute(qColors, 3));
        const qParticles = new THREE.Points(qGeo, new THREE.PointsMaterial({size: 0.05, vertexColors: true}));
        level3.add(qParticles);

        // --- ANIMATION & SCROLL ---
        function animate() {
            requestAnimationFrame(animate);
            level0.rotation.y += 0.001;
            level1.rotation.y -= 0.0005;
            level2.rotation.y += 0.0002;
            level3.rotation.z += 0.001;
            renderer.render(scene, camera);
        }
        animate();

        // Create a spacer to enable scrolling
        const totalScrollHeight = 5000;
        const spacer = document.createElement('div');
        spacer.style.height = (totalScrollHeight + window.innerHeight) + "px";
        spacer.style.width = "1px";
        spacer.style.pointerEvents = "none";
        document.body.appendChild(spacer);

        window.addEventListener('scroll', () => {
            const scroll = window.pageYOffset || document.documentElement.scrollTop;
            const progress = Math.min(1, Math.max(0, scroll / totalScrollHeight));

            // Map scroll to Camera Z
            let targetZ;
            if (progress < 0.3) {
                targetZ = gsap.utils.mapRange(0, 0.3, 5, -45, progress);
                updateUI(0);
            } else if (progress < 0.6) {
                targetZ = gsap.utils.mapRange(0.3, 0.6, -45, -140, progress);
                updateUI(1);
            } else if (progress < 0.9) {
                targetZ = gsap.utils.mapRange(0.6, 0.9, -140, -290, progress);
                updateUI(2);
            } else {
                targetZ = gsap.utils.mapRange(0.9, 1.0, -290, -315, progress);
                updateUI(3);
            }

            camera.position.z = targetZ;
            
            // Dynamic Fog
            scene.fog.density = 0.05 + (Math.sin(progress * Math.PI * 4) * 0.03);
        }, { passive: true });

        function updateUI(activeIdx) {
            document.querySelectorAll('.nav-step').forEach((el, i) => {
                el.classList.toggle('active', i === activeIdx);
            });
            document.querySelectorAll('.scale-label').forEach((el, i) => {
                el.classList.toggle('active', i === activeIdx);
            });
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

    </script>
</body>
</html>
